var v,y,U,L,D,V=-1,m=function(e){addEventListener("pageshow",function(t){t.persisted&&(V=t.timeStamp,e(t))},!0)},M=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},S=function(){var e=M();return e&&e.activationStart||0},f=function(e,t){var r=M(),i="navigate";return V>=0?i="back-forward-cache":r&&(document.prerendering||S()>0?i="prerender":document.wasDiscarded?i="restore":r.type&&(i=r.type.replace(/_/g,"-"))),{name:e,value:t===void 0?-1:t,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:i}},g=function(e,t,r){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var i=new PerformanceObserver(function(n){Promise.resolve().then(function(){t(n.getEntries())})});return i.observe(Object.assign({type:e,buffered:!0},r||{})),i}}catch{}},d=function(e,t,r,i){var n,a;return function(u){t.value>=0&&(u||i)&&((a=t.value-(n||0))||n===void 0)&&(n=t.value,t.delta=a,t.rating=function(c,o){return c>o[1]?"poor":c>o[0]?"needs-improvement":"good"}(t.value,r),e(t))}},k=function(e){requestAnimationFrame(function(){return requestAnimationFrame(function(){return e()})})},P=function(e){var t=function(r){r.type!=="pagehide"&&document.visibilityState!=="hidden"||e(r)};addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0)},B=function(e){var t=!1;return function(r){t||(e(r),t=!0)}},h=-1,R=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},w=function(e){document.visibilityState==="hidden"&&h>-1&&(h=e.type==="visibilitychange"?e.timeStamp:0,tt())},H=function(){addEventListener("visibilitychange",w,!0),addEventListener("prerenderingchange",w,!0)},tt=function(){removeEventListener("visibilitychange",w,!0),removeEventListener("prerenderingchange",w,!0)},x=function(){return h<0&&(h=R(),H(),m(function(){setTimeout(function(){h=R(),H()},0)})),{get firstHiddenTime(){return h}}},E=function(e){document.prerendering?addEventListener("prerenderingchange",function(){return e()},!0):e()},O=[1800,3e3],et=function(e,t){t=t||{},E(function(){var r,i=x(),n=f("FCP"),a=g("paint",function(u){u.forEach(function(c){c.name==="first-contentful-paint"&&(a.disconnect(),c.startTime<i.firstHiddenTime&&(n.value=Math.max(c.startTime-S(),0),n.entries.push(c),r(!0)))})});a&&(r=d(e,n,O,t.reportAllChanges),m(function(u){n=f("FCP"),r=d(e,n,O,t.reportAllChanges),k(function(){n.value=performance.now()-u.timeStamp,r(!0)})}))})},q=[.1,.25],ut=function(e,t){t=t||{},et(B(function(){var r,i=f("CLS",0),n=0,a=[],u=function(o){o.forEach(function(s){if(!s.hadRecentInput){var p=a[0],b=a[a.length-1];n&&s.startTime-b.startTime<1e3&&s.startTime-p.startTime<5e3?(n+=s.value,a.push(s)):(n=s.value,a=[s])}}),n>i.value&&(i.value=n,i.entries=a,r())},c=g("layout-shift",u);c&&(r=d(e,i,q,t.reportAllChanges),P(function(){u(c.takeRecords()),r(!0)}),m(function(){n=0,i=f("CLS",0),r=d(e,i,q,t.reportAllChanges),k(function(){return r()})}),setTimeout(r,0))}))},T={passive:!0,capture:!0},nt=new Date,j=function(e,t){v||(v=t,y=e,U=new Date,X(removeEventListener),W())},W=function(){if(y>=0&&y<U-nt){var e={entryType:"first-input",name:v.type,target:v.target,cancelable:v.cancelable,startTime:v.timeStamp,processingStart:v.timeStamp+y};L.forEach(function(t){t(e)}),L=[]}},rt=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;e.type=="pointerdown"?function(r,i){var n=function(){j(r,i),u()},a=function(){u()},u=function(){removeEventListener("pointerup",n,T),removeEventListener("pointercancel",a,T)};addEventListener("pointerup",n,T),addEventListener("pointercancel",a,T)}(t,e):j(t,e)}},X=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach(function(t){return e(t,rt,T)})},_=[100,300],ct=function(e,t){t=t||{},E(function(){var r,i=x(),n=f("FID"),a=function(o){o.startTime<i.firstHiddenTime&&(n.value=o.processingStart-o.startTime,n.entries.push(o),r(!0))},u=function(o){o.forEach(a)},c=g("first-input",u);r=d(e,n,_,t.reportAllChanges),c&&P(B(function(){u(c.takeRecords()),c.disconnect()})),c&&m(function(){var o;n=f("FID"),r=d(e,n,_,t.reportAllChanges),L=[],y=-1,v=null,X(addEventListener),o=a,L.push(o),W()})})},Y=0,I=1/0,C=0,it=function(e){e.forEach(function(t){t.interactionId&&(I=Math.min(I,t.interactionId),C=Math.max(C,t.interactionId),Y=C?(C-I)/7+1:0)})},Z=function(){return D?Y:performance.interactionCount||0},at=function(){"interactionCount"in performance||D||(D=g("event",it,{type:"event",buffered:!0,durationThreshold:0}))},z=[200,500],$=0,G=function(){return Z()-$},l=[],F={},J=function(e){var t=l[l.length-1],r=F[e.interactionId];if(r||l.length<10||e.duration>t.latency){if(r)r.entries.push(e),r.latency=Math.max(r.latency,e.duration);else{var i={id:e.interactionId,latency:e.duration,entries:[e]};F[i.id]=i,l.push(i)}l.sort(function(n,a){return a.latency-n.latency}),l.splice(10).forEach(function(n){delete F[n.id]})}},st=function(e,t){t=t||{},E(function(){var r;at();var i,n=f("INP"),a=function(c){c.forEach(function(p){p.interactionId&&J(p),p.entryType==="first-input"&&!l.some(function(b){return b.entries.some(function(N){return p.duration===N.duration&&p.startTime===N.startTime})})&&J(p)});var o,s=(o=Math.min(l.length-1,Math.floor(G()/50)),l[o]);s&&s.latency!==n.value&&(n.value=s.latency,n.entries=s.entries,i())},u=g("event",a,{durationThreshold:(r=t.durationThreshold)!==null&&r!==void 0?r:40});i=d(e,n,z,t.reportAllChanges),u&&("PerformanceEventTiming"in window&&"interactionId"in PerformanceEventTiming.prototype&&u.observe({type:"first-input",buffered:!0}),P(function(){a(u.takeRecords()),n.value<0&&G()>0&&(n.value=0,n.entries=[]),i(!0)}),m(function(){l=[],$=Z(),n=f("INP"),i=d(e,n,z,t.reportAllChanges)}))})},K=[2500,4e3],A={},ft=function(e,t){t=t||{},E(function(){var r,i=x(),n=f("LCP"),a=function(o){var s=o[o.length-1];s&&s.startTime<i.firstHiddenTime&&(n.value=Math.max(s.startTime-S(),0),n.entries=[s],r())},u=g("largest-contentful-paint",a);if(u){r=d(e,n,K,t.reportAllChanges);var c=B(function(){A[n.id]||(a(u.takeRecords()),u.disconnect(),A[n.id]=!0,r(!0))});["keydown","click"].forEach(function(o){addEventListener(o,function(){return setTimeout(c,0)},!0)}),P(c),m(function(o){n=f("LCP"),r=d(e,n,K,t.reportAllChanges),k(function(){n.value=performance.now()-o.timeStamp,A[n.id]=!0,r(!0)})})}})},Q=[800,1800],ot=function e(t){document.prerendering?E(function(){return e(t)}):document.readyState!=="complete"?addEventListener("load",function(){return e(t)},!0):setTimeout(t,0)},dt=function(e,t){t=t||{};var r=f("TTFB"),i=d(e,r,Q,t.reportAllChanges);ot(function(){var n=M();if(n){var a=n.responseStart;if(a<=0||a>performance.now())return;r.value=Math.max(a-S(),0),r.entries=[n],i(!0),m(function(){r=f("TTFB",0),(i=d(e,r,Q,t.reportAllChanges))(!0)})}})};export{q as CLSThresholds,O as FCPThresholds,_ as FIDThresholds,z as INPThresholds,K as LCPThresholds,Q as TTFBThresholds,ut as getCLS,et as getFCP,ct as getFID,st as getINP,ft as getLCP,dt as getTTFB,ut as onCLS,et as onFCP,ct as onFID,st as onINP,ft as onLCP,dt as onTTFB};
